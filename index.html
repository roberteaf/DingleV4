<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mines Game - Single Mine Edition</title>
<style>
  /* Background red-blue gradient */
  body, html {
    margin: 0; padding: 0; height: 100%;
    background: linear-gradient(135deg, #ff0000 0%, #0000ff 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
  }

  /* Main GUI container */
  #gameContainer {
    background: #111;
    border-radius: 20px;
    padding: 40px 35px;
    box-shadow:
      0 0 25px rgba(255,0,0,0.7),
      0 0 50px rgba(0,0,255,0.7);
    width: 480px;
    max-width: 95vw;
    user-select: none;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Title */
  #gameContainer h1 {
    color: #eee;
    margin-bottom: 20px;
    font-weight: 900;
    letter-spacing: 3px;
    font-size: 3rem;
    text-shadow:
      0 0 15px #ff0000,
      0 0 30px #0000ff;
    user-select: none;
  }

  /* Info / Score panel */
  #infoPanel {
    color: #ccc;
    margin-bottom: 25px;
    font-size: 1.25rem;
    min-height: 32px;
    text-align: center;
    font-weight: 700;
    transition: color 0.4s ease, text-shadow 0.4s ease;
  }

  /* Grid container */
  #grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-gap: 14px;
    width: 100%;
  }

  /* Each cell button */
  .cell {
    background: #222;
    border-radius: 10px;
    height: 58px;
    cursor: pointer;
    border: 3px solid #444;
    position: relative;
    overflow: hidden;
    transition:
      background-color 0.35s cubic-bezier(0.4,0,0.2,1),
      box-shadow 0.35s cubic-bezier(0.4,0,0.2,1),
      transform 0.2s ease;
    color: transparent;
    font-size: 30px;
    font-weight: 900;
    user-select: none;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  /* Hover effect on safe cells */
  .cell.safe:hover:not(.revealed) {
    background-color: #0b1b0b;
    box-shadow:
      0 0 12px #00cc77,
      0 0 26px #00cc77;
    transform: scale(1.12);
    color: #00cc77;
  }

  /* Clicked safe cell */
  .cell.safe.revealed {
    background-color: #004400;
    color: #00ff88;
    box-shadow: 0 0 18px #00ff88;
    cursor: default;
    transform: scale(1);
    pointer-events: none;
  }

  /* Mine cell clicked */
  .cell.mine.revealed {
    background-color: #660000;
    color: #ff4444;
    box-shadow:
      0 0 24px #ff0000,
      0 0 60px #ff3333;
    cursor: default;
    pointer-events: none;
    animation: explode 1s ease forwards;
  }

  /* Disable pointer on revealed cells */
  .cell.revealed {
    pointer-events: none;
  }

  /* Explosion animation */
  @keyframes explode {
    0% {
      transform: scale(1) rotate(0deg);
      box-shadow:
        0 0 24px #ff0000,
        0 0 60px #ff3333;
      color: #ff4444;
    }
    50% {
      transform: scale(1.6) rotate(20deg);
      box-shadow:
        0 0 50px #ff2200,
        0 0 90px #ff5555;
      color: #ff0000;
      text-shadow: 0 0 15px #ff6600;
    }
    100% {
      transform: scale(1) rotate(0deg);
      box-shadow:
        0 0 24px #ff0000,
        0 0 60px #ff3333;
      color: #ff4444;
      text-shadow: none;
    }
  }

  /* Reset button */
  #resetBtn {
    margin-top: 30px;
    background: #222;
    border: 3px solid #0099ff;
    padding: 15px 32px;
    border-radius: 15px;
    font-size: 1.35rem;
    color: #0099ff;
    cursor: pointer;
    transition:
      background-color 0.35s ease,
      color 0.35s ease,
      box-shadow 0.35s ease;
    font-weight: 800;
    user-select: none;
  }

  #resetBtn:hover {
    background-color: #0099ff;
    color: #111;
    box-shadow:
      0 0 30px #0099ff,
      0 0 60px #00bbff;
  }

  /* Footer credit */
  #footer {
    margin-top: 18px;
    font-size: 0.8rem;
    color: #666;
    user-select: none;
  }

  /* Responsive adjustments */
  @media (max-width: 540px) {
    #gameContainer {
      width: 95vw;
      padding: 30px 25px;
    }
    .cell {
      height: 50px;
      font-size: 26px;
      border-width: 2.5px;
    }
    #resetBtn {
      font-size: 1.1rem;
      padding: 12px 28px;
    }
    #gameContainer h1 {
      font-size: 2.4rem;
    }
  }
</style>
</head>
<body>

<div id="gameContainer" role="main" aria-label="Mines Game with One Mine">
  <h1>Mines</h1>
  <div id="infoPanel" aria-live="polite" aria-atomic="true">Click on the tiles to find the safe spots. Avoid the mine!</div>
  <div id="grid" aria-label="Game grid" role="grid" aria-rowcount="7" aria-colcount="7"></div>
  <button id="resetBtn" aria-label="Restart Game Button">Restart Game</button>
  <div id="footer">Â© 2025 Mines Game</div>
</div>

<script>
  (() => {
    const gridSize = 7; // 7x7 grid
    const totalCells = gridSize * gridSize;
    const minesCount = 1; // Only one mine

    const gridEl = document.getElementById('grid');
    const infoPanel = document.getElementById('infoPanel');
    const resetBtn = document.getElementById('resetBtn');

    let minePosition = -1; // single mine index
    let revealedCount = 0;
    let gameOver = false;

    // Efficiently create grid cells once and reuse on reset
    const cells = [];

    // Generate single mine position (random)
    function generateMine() {
      minePosition = Math.floor(Math.random() * totalCells);
    }

    // Initialize grid with buttons or reuse existing
    function createGrid() {
      // Clear previous grid if any
      gridEl.innerHTML = '';
      cells.length = 0; // reset cells array

      for(let i = 0; i < totalCells; i++) {
        const btn = document.createElement('button');
        btn.classList.add('cell');
        btn.setAttribute('role', 'gridcell');
        btn.setAttribute('aria-label', `Tile ${i+1}`);
        btn.dataset.index = i;

        // Mark the mine & safe classes for styling
        if (i === minePosition) {
          btn.classList.add('mine');
        } else {
          btn.classList.add('safe');
        }
        gridEl.appendChild(btn);
        cells.push(btn);
      }
    }

    // Reveal safe spot with nice animation
    function revealSafe(btn) {
      if (btn.classList.contains('revealed') || gameOver) return;
      btn.classList.add('revealed');
      btn.textContent = 'âœ“';
      revealedCount++;
      updateInfo(`Safe! Tiles cleared: ${revealedCount}/${totalCells - minesCount}`);
      checkWin();
    }

    // Reveal mine with explosion animation
    function revealMine(btn) {
      if (btn.classList.contains('revealed') || gameOver) return;
      btn.classList.add('revealed');
      btn.textContent = 'ðŸ’£';

      updateInfo('ðŸ’¥ BOOM! You hit the mine! Game Over.', true);
      gameOver = true;
      revealAllMines();
    }

    // Reveal all mines after game over (here just one mine)
    function revealAllMines() {
      for(let i=0; i<cells.length; i++) {
        if (i === minePosition && !cells[i].classList.contains('revealed')) {
          const mineCell = cells[i];
          mineCell.classList.add('revealed', 'mine');
          mineCell.textContent = 'ðŸ’£';
          mineCell.style.color = '#ff4444';
          mineCell.style.backgroundColor = '#660000';
          mineCell.style.boxShadow = '0 0 24px #ff0000, 0 0 60px #ff3333';
          mineCell.style.cursor = 'default';
          mineCell.style.animation = 'explode 1s ease forwards';
        }
        // Disable safe cells interaction
        cells[i].classList.remove('safe');
      }
    }

    // Check if player won (all safe spots revealed)
    function checkWin() {
      if (revealedCount === totalCells - minesCount) {
        updateInfo('ðŸŽ‰ Congratulations! You cleared all safe tiles!', false, true);
        gameOver = true;
      }
    }

    // Update info panel with message and styles
    function updateInfo(text, isError = false, isSuccess = false) {
      infoPanel.textContent = text;
      if (isError) {
        infoPanel.style.color = '#ff4444';
        infoPanel.style.textShadow = '0 0 12px #ff0000';
      } else if (isSuccess) {
        infoPanel.style.color = '#00ff88';
        infoPanel.style.textShadow = '0 0 12px #00ff88';
      } else {
        infoPanel.style.color = '#ccc';
        infoPanel.style.textShadow = 'none';
      }
    }

    // Handle clicks via event delegation
    function onGridClick(e) {
      if (gameOver) return;
      const btn = e.target;
      if (!btn.classList.contains('cell') || btn.classList.contains('revealed')) return;

      const index = Number(btn.dataset.index);

      if (index === minePosition) {
        revealMine(btn);
      } else {
        revealSafe(btn);
      }
    }

    // Reset game state and UI
    function resetGame() {
      gameOver = false;
      revealedCount = 0;
      updateInfo('Click on the tiles to find the safe spots. Avoid the mine!');
      generateMine();
      createGrid();
    }

    // Initialize game on page load
    resetGame();

    // Event listeners
    gridEl.addEventListener('click', onGridClick);
    resetBtn.addEventListener('click', resetGame);
  })();
</script>

</body>
</html>
