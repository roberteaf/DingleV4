<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Management Website (Client-Side Only)</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        form { margin-bottom: 20px; }
        input { margin: 5px 0; display: block; }
        button { margin-top: 10px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <h1>Money Management Website</h1>
    <p><strong>Note:</strong> This is a client-side only version using localStorage. It's not secure for real use as data and passwords can be accessed via browser tools. For demonstration purposes only. Initial users: 'lpx' (admin, password: 'adminpass'), 'user' (password: 'userpass').</p>

    <!-- Login Form -->
    <div id="login-section">
        <h2>Login</h2>
        <form id="login-form">
            <label for="username">Username:</label>
            <input type="text" id="username" required>
            <label for="password">Password:</label>
            <input type="password" id="password" required>
            <button type="submit">Login</button>
        </form>
    </div>

    <!-- User Dashboard -->
    <div id="user-dashboard" class="hidden">
        <h2>Welcome, <span id="user-name"></span></h2>
        <p>Your balance: $<span id="user-balance"></span></p>
        <button id="logout">Logout</button>
    </div>

    <!-- Admin Panel -->
    <div id="admin-panel" class="hidden">
        <h2>Admin Panel</h2>
        <form id="admin-action-form">
            <label for="target-user">Target Username:</label>
            <input type="text" id="target-user" required>
            <label for="amount">Amount:</label>
            <input type="number" id="amount" required>
            <button type="button" id="add-money">Add Money</button>
            <button type="button" id="remove-money">Remove Money</button>
        </form>
        <div id="admin-message"></div>
    </div>

    <script>
        // Simple hash function (NOT SECURE, for demo only)
        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return hash.toString();
        }

        // Initialize users if not present
        if (!localStorage.getItem('users')) {
            const users = [
                { username: 'lpx', password: simpleHash('adminpass'), balance: 0, isAdmin: true },
                { username: 'user', password: simpleHash('userpass'), balance: 0, isAdmin: false }
            ];
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Get users
        function getUsers() {
            return JSON.parse(localStorage.getItem('users')) || [];
        }

        // Save users
        function saveUsers(users) {
            localStorage.setItem('users', JSON.stringify(users));
        }

        // Handle Login
        document.getElementById('login-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = simpleHash(document.getElementById('password').value);

            const users = getUsers();
            const user = users.find(u => u.username === username && u.password === password);

            if (user) {
                localStorage.setItem('currentUser', username);
                showDashboard(user);
            } else {
                alert('Invalid credentials');
            }
        });

        // Show Dashboard
        function showDashboard(user) {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('user-dashboard').classList.remove('hidden');
            document.getElementById('user-name').textContent = user.username;
            document.getElementById('user-balance').textContent = user.balance;

            if (user.isAdmin) {
                document.getElementById('admin-panel').classList.remove('hidden');
            }
        }

        // Logout
        document.getElementById('logout').addEventListener('click', () => {
            localStorage.removeItem('currentUser');
            location.reload();
        });

        // Admin Add Money
        document.getElementById('add-money').addEventListener('click', () => {
            adminAction('add');
        });

        // Admin Remove Money
        document.getElementById('remove-money').addEventListener('click', () => {
            adminAction('remove');
        });

        // Admin Action Function
        function adminAction(action) {
            const currentUser = localStorage.getItem('currentUser');
            const users = getUsers();
            const admin = users.find(u => u.username === currentUser);
            if (!admin || !admin.isAdmin) {
                alert('Not authorized');
                return;
            }

            const targetUser = document.getElementById('target-user').value;
            const amount = parseFloat(document.getElementById('amount').value);

            const target = users.find(u => u.username === targetUser);
            if (!target) {
                document.getElementById('admin-message').textContent = 'User not found';
                return;
            }

            if (action === 'add') {
                target.balance += amount;
            } else if (action === 'remove') {
                target.balance -= amount;
            }

            saveUsers(users);
            document.getElementById('admin-message').textContent = `Action performed: ${action} $${amount} for ${targetUser}`;

            // Update dashboard if current user is target
            if (currentUser === targetUser) {
                document.getElementById('user-balance').textContent = target.balance;
            }
        }

        // Check if already logged in
        const currentUser = localStorage.getItem('currentUser');
        if (currentUser) {
            const users = getUsers();
            const user = users.find(u => u.username === currentUser);
            if (user) {
                showDashboard(user);
            } else {
                localStorage.removeItem('currentUser');
            }
        }
    </script>
</body>
</html>
